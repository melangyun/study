**블록체인의 핵심 가치 3가지**
- 탈중앙
- 분산
- 금본위제

**화폐시스템의 4가지 구성**
- 화폐: 화폐 `발행 규모` 및 화폐 `발행 방식`
- 거래: 거래의 `존재 증명` 및 화폐` 송금 및 지급` 관련
- 장부: 거래기록 및 장부 무결성 보장 방안
- 관리: 화폐 시스템 유지-보수 및 의사결정 방안

# 블록체인 기반 화폐 시스템 구현을 위한 요구사항

1. 화폐 발행량
2. 화폐 발행 방식
3. 존재 증명 및 전후 관계
4. 트랜잭션
5. 합의 알고리즘
6. 이중지불 방지
7. 위변조 방지
8. 자발적 참여 방안

## 1) 화폐 발행량

![[비트코인 발행량 감소(2-92).png]]

- 전체 발행량은 2,100만 개로 설계되어 있다.
- 화폐 공급량은 4년마다 반으로 떨어지게 되어있다.
	- 처음 블록 생성시 보상으로 50BTC를 발행하여 지급하였다.
	- `4년`마다 그 발행량이 25BTC, 12.5BTC, 6.25BTC로 줄어들며 결국 0에 수렴한다.

> [!tip] 화폐 공급량이 시간이 갈 수록 줄어들게 설계한 원리를 기반으로한 목표
> - 화폐 공급은 일정하고 안정적이어야 한다.
> - 시간이 지날수록 공급량을 줄여 인플레이션 가능성을 차단해야 한다.
> - 총발행량을 한정하여 가치를 보장한다.
> - 화폐 발행 시기와 규모, 총발행량 규모가 모두 예측 가능하게 하여 안정적이고 체계적인 대응이 가능하게 한다.
## 2) 화폐 발행 방식

- 화폐 발행 10분 간격
	Nonce값을 찾는데 소요되는 약 10분이라는 시간이 화폐 발행 규모와 시기를 예측할 수 있으며, 이에 적절히 대응하게 할 수도 있다.
- 난이도 조절을 통한 화폐 발행 방안
	2,016개 블록이 생성될때마다 연산 속도를 체크해서, 연산 속도가 빨라질 경우 난이도를 높여서 항상 10분정도를 유지할 수 있도록 설계했다.
	- 난이도 상향은 한번에 최대 300%까지 상승 가능
	- 하향은 최대 75% 수준까지 낮출 수 있음
	- 현재 난이도는 최초 난이도에 비해 23조 2,440억 배 높다.
## 3) 트랜잭션

중개 기관 없이 개인 간 직접 송금을 하기 위해서는 화폐 형태가 디지털이어야 한다.
- 비트코인 트랜잭션 자체가 화폐다.
	또한, 중개기관이 없어도 비트코인은 형태적으로 디지털 화폐이다.

- 각 트랜잭션에는 UTXO와 STXO가 존재한다.
  UTXO 형태로 존재했다가 사용되고 나면 STXO로 변경된다.
- 모든 트랜잭션은 논리적으로 연결되어 있으며, 출금이 존재하기 위해서는 반드시 이전에 입금 과정이 존재한다
- `Coinbase Transaction`: 채굴에 대한 보상으로 지급되는 트랜잭션

## 4) 존재 증명 및 우선순위 보장

중앙시스템 환경에서는 중앙시스템이 존재하고 하나의 시스템에서 하나의 장부에 시간 단위를 잘게 쪼개서 모든 트랜잭션을 일렬로 세워 타임스탬프를 부여한다.

새로운 블록을 생성할 때 이전 블록의 해시값을 포함시켜야만 새로운 블록이 생성되도록하였다.
- 간접적으로 타임스탬프를 구현하여 존재 증명과 우선순위를 구현한다.

![](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Ft1.daumcdn.net%2Fcfile%2Fblog%2F9939453D5ACA09340F)

- `타임 스탬프 서버(Timestamp server)`
- [i] 블록체인에서는 이전 블록의 해시값을 다음 블록에 포함해서 순서대로 배치하는 방식으로 간접적으로 타임스탬프를 구현해서 존재 증명과 우선순위를 구현한다.

## 5) 합의 알고리즘

블록체인은 중앙 통제 장치가 없기때문에 분산된 장부의 일치는 매우 중요한 이슈이다.
- 단순히 분산된 장부를 일치시킨다는 의미를 넘어 완전히 탈중앙화 환경에서 합의에 도달한다는 의미가 크다.

**합의알고리즘**
- 다수 의견 채택 방식; PBFT(Practical Byzantine Fault Tolerance)
- 대표자 의견 채택 방식

### 가) 다수 의견 채택 방식 PBFT 합의 알고리즘

부정한 노드가 `f`개 있을 때 총 노드 개수가 `(3f+1)`개 이상이면 2/3 다수결에 의해 합의를 이끌어낼 수 있는 합의 알고리즘이다.
- PBFT는 참여한 노드가 다른 모든 노드와 각각 통신해야 한다. 참가자 노드가 늘어난다면 다른 참가자와의 통신량은 기하급수적으로 늘어나게 되어 네트워크 전체적으로 비효율적이다.

> 따라서 PBFT는 소규모 네트워크에 적합하며 Public 블록보다는 Private 블록체인에 더 적합하다.

### 나) 대표자 의견 채택방식 POW 합의 알고리즘

- 계산 문제 풀기를 통해 대표자를 선정하다 보니 여러명의 대표자가 동시에 선정될수 있기 때문에 분기가 발생할 수 있다.

반드시 가장 많은 작업을 한 노드가 대표자로 선정된다고 할 수 는 없지만, 평균적으로 많은 연산 작업을 한 노드가 대표자로 선정된다.
- 평균적으로 보면 채굴 승자는 연산을 많이 한 노드나 채굴 장비가 뛰어난 노드로 귀결된다.

## 6) 이중 지불 방지

- UTXO기반 검증
- 합의 알고리즘
- Longest Chain 규칙

## 7) 위변조 방지

1. 블록의 독특한 구조 
	위변조를 하면 블록을 다시 생성해야 한다.
	- 머클루트라는 하나의 값으로 표현된다.
	- 하나라도 변경되면 `머클루트`가 변경되고, `Nonce`값을 다시찾아야 한다.
1. 블록 생성에 10분이라는 시간 소요
	위변조를 하더라도 10분이라는 엄청난 연산 시간을 소요해야 한다.
3. 블록 체인 구조
	블록을 모두 체인처럼 연결한다.
4. 블록체인 분산 저장
	합의된 블록체인은 수만 개의 노드에 동일한 형태로 분산 저장되어 있다.
	- 설사 한 개의 노드에서 위변조가 시도된다고 하더라도 수만 개의 분산된 모든 장부를 동일하게 위변조 하는 것은 불가능하다.

## 8) 화폐 발행 및 자발적 참여 유인 방안

