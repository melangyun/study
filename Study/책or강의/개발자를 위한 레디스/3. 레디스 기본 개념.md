레디스는 key-value형태의 데이터 저장소이며, <u>레디스에서 모든 데이터는 키에 연결돼 있기 때문에 데이터를 저장하고 저장된 데이터를 검색할 때에는 항상 키를 식별자로 이용한다.</u>
데이터는 레디스에서 제공하는 다양한 형태의 자료구조로 저장될 수 있다.

# 레디스의 자료구조

## String
string은 레디스에서 데이터를 저장할 수 있는 가장 간단한 자료 구조다. string에서는 최대 `512MB`의 문자열 데이터를 저장할 수 있으며, 이진 데이터를 포함하는 모든 종류의 문자열이 binary-safe하게 처리되기 때문에 JPEG이미지와 같은 바이터 값, HTTP응답값 등의 다양한 데이터를 저장하는 것도 가능하다.

> [!info] string은 키와 실제 저장되는 아이템이 일대일로 연결되는 유일한 자료구조.
> string이 아닌 다른 자료 구조에서는 하나의 키에 여러개의 아이템이 저장된다.

```redis
SET hello world
```
- [f] 만약 hello라는 키에 다른 값이 연결돼 있다면 기존 값은 새로 입력된 값으로 대체되며, 저장된 값이 같은 string형태가 아닌 다른 형태의 자료구조라도 동일하게 동작한다.

**NX옵션 - 지정한 키가 없을 때에만 새로운 키를 저장한다.**

```redis-cli
SET hello newval NX
(nil)
```
새로운 값이 저장되지 않는다.

**XX옵션 - 키가 있을때에만 새로운 값으로 덮어 쓴다.**

string자료 구조는 모든 문자열 데이터를 저장할 수 있기 때문에 당연히 숫자 형태의 데이터를 젖아하는것도 가능하다.

- **INCR, INCRBY와 같은 커맨드를 이용하면 string 자료 구조에 저장된 숫자를 원자적으로 조작 할 수 있다.**
> [!info] 커맨드가 원자적이라는 것은 같은 키에 접근하는 여러 클라이언트가 경쟁상태(race condition)을 발생시킬 일이 없음을 의미한다.
> 커맨드가 수행하는 타이밍이나 순서에 따라 이미 실행한 커맨드가 무시되거나 같은 커맨드가ㅣ 중복 처리돼 수행 결과가 달라지는 일은 발생하지 않는다.

> incr: 발생시 - 읽고 - 증가하고- 저장하는 일련의 과정은 원자적으로 발생한다.
>이 과정을 수행할 때 다른 클라이언트가 이 키에 접근할 수 없음을 보장한다.


**MSET, MGET 커맨드를 이용하면 한 번에 여러 키를 조작할 수 있다.**
```redis-cli
MSET a 10 b 20 c 30

MGET a b c
```

MSET과 MGET과 같은 커맨드를 적절하게 사용해 네트워크 통신 시간을 줄인다면 전반적으로 서비스의 응답 속도를 확실하게 향상시킬 수 있게된다.


