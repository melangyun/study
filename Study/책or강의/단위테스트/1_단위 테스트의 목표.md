단위 테스트에시간을 투자할 때는 최대한 이득을 얻도록 노력해야한다. (쉽지는 x)
- 테스트에 드는 노력을 가능한 줄인다.
- 그에 따르는 이득을 최대화

**균형을 달성한 프로젝트**
> 무난하게 성장하고 유지 보수가 많이 필요하지 않으며, 끊임없이 변화하는 고객의 요구에 신속히 대응할 수 있는 프로젝트

(단위테스트 기술 간의 차이)
**그렇지 않은 프로젝트**;도움x, 자주 고장나며 유지 보수 많이 필요
>  노력을 많이 들이고 테스트를 많이 작성하더라도, 많은 버그와 유지비로 프로젝트 진행이 느려지게 된다.

# 1.1 단위 테스트 현황
테스트가 있어도 개발자들이 원하는 결과를 얻지 못하는 경우가 많다.
코드는 자산이 아니라 *책임*이다. 테스트가 상황을 더 나쁘게 할 수 있다.
테스트 작성에 그치지 않고 노력 대비 최대의 이익을 이끌어내는 방식으로 단위 테스트를 수행 할 수 있다.

# 1.2 단위테스트의 목표
**-> 소프트웨어의 지속 가능한 성장**

>**단위 테스트와 코드 설계의 관계**
  코드를 단위테스트 하기 어렵다면 코드 개선이 반드시 필요하다는 것을 의미한다.
> 보통은 *강결합*에서 저품질이 나타난다. (서로 충분히 분리되지 않아서 따로 테스트하기 어려움)

**소프트웨어의 엔트로피(개발속도의 빠른 감소)**
- 코드베이스에서 무언가 변경할때마다 무질서도(엔트로피)는 증가한다.
- 지속적인 정리, 리팩터링 등과 같은 적절한 관리를 하지 않으면 방치 시스템이 점점 더 복잡하고 무질서해진다.
- 하나의 버그를 수정하면 더 많은 버그를 양산, 소프트웨어의 한 부분을 수정하면 다른 부분들이 고장(도미노 현상)

*테스트로 이러한 경향을 뒤집을 수 있다.* 회귀에 대한 보험을 제공하는 도구이며, 테스트는 새로운 기능을 도입하거나, 새로운 요구사항에 더 잘 맞게 리팩터링한 후에도 기존 기능이 잘 동작하는지 확인하는데 도움이 될 수 있다.

## 1.2.1 좋은 테스트와 좋지 않은 테스트를 가르는 요인
> **코드는 자산이 아니라 책임이다**

테스트가 잘못 작성된 프로젝트는 초반에는 테스트가 잘 작성된 프로젝트의 속성을 보여주지만, 결국 침체 단계에 빠진다.
- 모든 테스트를 작성할 필요는 없다.
- 소프트 웨어 품질에 기여하지 않는 테스트 코드
	- 잘못된 경고가 발생한다.
	- 회귀 오류를 알아내는데 도움이 되지 않는다.
	- 유지 보수가 어렵고 느리다.
	프로젝트에 도움이 되는지 여부를 명확하게 파악하지 않고 단위 테스트를 작성하는 데만 빠져들기 쉽다.
- 단지 테스트를 더 많이 쏟아내도 단위 테스트의 목표를 달성 할 수 없다.
	==**테스트의 가치와 유지 비용을 모두 고려애햐 한다.**==
	- 기반 코드를 리팩터링 할 때 테스트도 리팩터링 하라.
	- 각 코드변경시 테스트를 실행하라.
	- 테스트가 잘못된 경고를 발생시킬경우 수정
	- 기반 코드가 어떻게 동작하는지 이해하려고 할때는 테스트를 읽는 데 시간을 투자해야 한다.
- 지속 가능한 프로젝트 성장을 위해서는 고품질 테스트에만 집중해야한다.

# 1.3 테스트 스위트 품질 측정을 위한 커버리지 지표
- 코드 커버리지 / 분기 커버리지
> **커버리지 지표는 괜찮은 부정지표이지만, 좋지 않은 긍정지표이다**
> - 적을때는 테스트가 충분하지 않다는 증거
> - 100%라고 해서 양질의 테스트라고할수는 없다.

테스트 스위트의 품질을 결정하는데 어떤 커버리지 지표도 의존 할 수 없다.
- 테스트 대상 시스템의 모든 가능한 결과를 검증한다고 보장할 수  없다.
	- ex) (TRY-CATCH로 감싼경우)
- 외부라이브러리의 코드 경로를 고려할 수 있는 커버리지 지표는 없다.

==**테스트 지표는 지표 그 자체로 보는것이며, 목표로 여겨서는 안된다**==
EX) 병원에 있는 환자, 체온, 에어컨

# 1.4 무엇이 성공적인 테스트 스위트를 만드는가?
성공적인 테스트 스위트는 다음과 같은 특성을 갖고 있다.
- 개발 주기에 통합돼 있다.
	- 자동화된 테스트를 할 수 있는 방법은 끊임없이 하는 것 뿐이다.
	- 모든 테스트는 개발 주기에 통합돼야 한다.
	- 이상적으로는 코드가 변경될 때마다 아무리 작은 것이라도 실행해야 한다.
- 코드베이스에서 가장 중요한 부분만을 대상으로 한다.
	- 시스템의 가장 중요한 부분에 단위 테스트 노력을 기울여야한다.
	- 다른부분은 간략하게 또는 간접적으로 검증하는 것이 좋다.
		- 인프라 코드 / db, 서드파티 시스템 등 외부 서비스 및 종속성 / 하나로 묶는 코드들
		- ==대부분 가장 중요한 부분은 비즈니스 로직(도메인 모델)이 있는 부분== -> 비즈니스로직 테스트가 투자 시간 대비 최고의 수익을 낼 수 있다.
		- 도메인 모델을 다른 애플리케이션 문제와 분리해야 단위 테스트에 대한 노력을 도메인 모델에만 집중 할 수있다.
- 최소한의 유지비로 최대의 가치를 끌어낸다.
	- 단위테스트에 가장 어려운 부분이기도 하다.
		1. 가치있는 테스트 식별하기
		2. 가치있는 테스트 작성하기
	- 가치 있는 테스트를 작성하려면 코드 설계 기술도 알아야 한다. 단위 테스트와 기반 코드는 서로 얽혀 있으므로 *코드 베이스에 노력을 많이 기울이지 않으면 가치 있는 테스트를 만들 수 없다.*