# 웹의 기본 아키텍처
![[웹의 기본 아키텍처.png]]
>[!info] 클라이언트 > 웹 서버 > 웹 어플리케이션 서버 > 데이터 베이스
>웹서버는 css, html같은 정적인 데이터들을 담당하고, 웹 어플리케이션 서버는 데이터 베이스에 접근하여 동적으로 변하는 데이터를 처리
>---
>태초 웹서버만 있는 형태에서 웹의 복잡도가 증가함에 따라
>웹서버와 웹 어플리케이션을 분리하는 형태로 발전

## 아키텍처 세분화로 관측 가능한 시스템, 효율적인 리소스 사용이 가능해짐

> [!info] 관심사의 분리로 인해 관측가능한 시스템, 효율적인 리소스 사용이 가능해진다.
> 관심사의 분리: 관심사 분리(separation of concerns, SoC)는 **컴퓨터 프로그램을 구별된 부분으로 분리시키는 디자인 원칙**으로, 각 부문은 개개의 관심사를 해결한다. 관심사 분리를 이용하면 프로그램의 설계, 디플로이, 이용의 일부 관점에 더 높은 정도의 자유가 생긴다.

관심사 또는 역할에 따라 모듈을 분리함으로서 역할에 맞는 다양한 최적화 기법과 이슈가 생겼을 때 스코프를 줄일 수 있다. 그렇지만 장점만 있는 것은 아니고, 관리 포인트가 늘어나고, 시스템 복잡도가 상승하는 문제가 있다. 그래서 항상 장점과 단점 사이의 균형을 잘 잡아가는 것이 중요하다.

> [!warning] 기본 아키텍처에서 클라이언트는 무한으로 늘어나지만, 서버는 그렇지 않다.
> 특히 상태를 가지는 데이터베이스는 더욱 어렵다.

**대용량 시스템의 모습**![[대용량서비스의 모습.png]]
# 왜 데이터 베이스가 병목일까?
## 스케일 업 vs 스케일 아웃
|                    |        **스케일 업**        |          **스케일 아웃**          |
|:------------------:|:---------------------------:|:---------------------------------:|
| **유지 보수 관리** |            쉬움             | 여러 노드에 적절히 부하 분산 필요 |
|     **확장성**     |         제약이 있음         |     스케일 업에 비해 자유로움     |
|    **장애복구**    | 서버가 1대, 다운타임이 있음 |        장애 탄력성이 있음         |

스케일 아웃이 되어 실제 서버는 여러개 존재하더라도, 클라이언트에는 마치 하나의 서버인 것 처럼 동작해야 한다. 때문에 여러 서버들은 대부분 같은 데이터를 바라볼 수 있도록 데이터베이스를 공유하게 된다.

>[!warning] DB의 스케일 아웃
>서버보다 스케일 아웃을 하기 위해서 훨씬 많은 비용이 필요하다.
>현대 서버 아키텍처는 상태관리를 데이터베이스에 위임하고, 서버는 상태관리를 하지 않는 방향으로 발전해왔다.

- [!] 또, 스케일 아웃 외에도, DB는 디스크의 데이터를 접근해서 데이터를 가져온다.
# 대용량 트래픽/ 데이터 처리는 왜 어려울까?

- 하나의 서버로 감당하기 힘들어 대부분 여러개의 서버 또는 데이터베이스를 사용함
- 여러개의 서버에서 유입되는 데이터의 일관성을 보장할 수 있어야함
- 코드 한줄이 데이터에 미치는 영향범위가 굉장히 커짐
- 여러 서비스들이 얽혀있어, 시스템 복잡도가 상당히 높음

## 대용량 시스템은 어떠해야 하는가?
- [*] **고가용성**: 언제든 서비스를 이용할 수 있어야 한다.
- [*] **확장성**: 시스템이 비대해짐에 따라 증가하는 데이터와 트래픽에 대응할 수 있어야 한다.
- [*] **관측가능성**: 문제가 생겼을 때 빠르게 인지할 수 있어야 하고, 문제의 범위를 최소화 할 수 있어야 한다.

대용량 시스템은 고가용성, 확장성, 관측 가능성을 확보할 수 있어야 한다.