레거시 시스템에서 인력을 늘려도 개발 속도가 그에 비례하게 나지 않는다.

> [!error] 문제는 회귀버그 (Regression)
> 잘 동작하는 기능들이 새로운 기능 배포로 인해서 동작하지 않는다
> - "배포가 무서워진다"
> - 업무 대부분의 시간을 인수테스트를 하는데에 너무 많이 쓰고있게 된다.

- `그럼 테스트를 짜면 되겠다!` 라는 생각이 들기 시작함.
	- 하지만 테스트는 SW의 내적 품질을 올리는 일이지, 사용자가 체감할만한 외적 품질을 올리는 일이 아님.
	- 그렇기 때문에 (보고용으로) 커버리지에 집착하기 시작함
- `"이렇게 당연한것도 테스트를 하나?"` 
	- 뭐 그래도 커버리지는 올라가니까 테스트함

![[테스트_이게맞나.png]]
`JPA Repository`의 `save`만 호출하는 코드인데 온갖 삽질을 다해야함 (db설정, mock 설정)..
- `비결정적인 테스트` 로 인해 불필요한 디버깅을 계속해서 하게됨

- [c] <u>너무 느리고, 비결정적이고, 뭘 하는 테스트인지 알수없게 되기때문</u>에 모두가 테스트를 짜지 않게됨

결과적으로 테스트에 대한 부정적인 인상만 남는다. > 하지만 대부분의 프로젝트들이 겪는 상황임

> [!error] 잘못된게 무엇일까?
> 1. TDD와 Test는 다르다
> 2. 레거시에 테스트를 넣는게 의미가 없을 수 있다.
> 	- <u>테스트를 넣으려면 코드 개선이 필요하다</u>
> 	- 사실, 근본적으로 이러한 형태를 갖는 프로젝트들은 뻣뻣한 설계, 즉 스프링이나 JPA에 의존적인 상태일 확률이 높다.

>[!info] 테스트의 목적
>
>1. 회귀 버그 방지
>2. 유연한 설계로 개선
>	- 테스트를 쉽게 만들어줌
>	- 테스트를 결정적이게 만들어줌
>	- 테스트를 고민하면 설계가 개선되고, 설계를 고민하면 테스트가 쉬워진다.
>> 테스트를 짜다보면 테스트가 외부 시스템에 의존되는 상황을 피하라는 `신호`를 보낸다
>> 개발자들은 이 신호를 잘 캐치해서 설계를 진화시켜야 한다.
>3. 커버리지에 집착하면 안된다
>	- 테스트를 통해 얻을수 있는 효용성에 집중해야지, 커버리지에 집착해서는 안된다.

하지만 테스트로 `유연한 설계로 개선` 하는것은 **매우 도전적인** 일이다. 왜냐하면 우리의 시스템은 회귀 테스트가 없기 때문이다.
처음부터 훌륭한 설계와 테스트 자동화가 있었다면 좋았겠지만, 테스트의 경우 생각보다 도입된지 그렇게 오래되지 않은 개념이다(구글에서도 2005년 도입)

> [!info] 테스트는 왜 해야하며, 테스트를 통해 얻을 수 있는 핵심 가치는 무엇인지에 대한 고민이 필요하다.

> TDD를 논하기 전에 프로젝트는 테스트가 가능한 구조로 변경되어야 하고
> 여기에 테스트를 넣어보아야 한다.
> - 이것은 마치 소형차를 기차로 바꾸는 과정이다