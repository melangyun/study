보안은 안전을 지키는일. "사고 없는 상태를 유지하는 모든 활동"

# 정보 보안의 정의
다양한 위협으로 부터 보안을 보호하는 것
- 정보 보안
	1. 외부에서 정보가 저장된 시스템을 사용하지 못하게하거나 유출시도에 맞서 보호, 운영
	2. 정보가 내부에서 유출되거나 남용되는것을 막기 위한 분야
- 정보 보안의 3대 요소
	1. 기밀성(Confidentiality)
		- 인가되지 않은 사용자가 정보를 보지 못하게 하는 작업
		- 암호화 작업
	2. 무결성(Integrity)
		- 정확하고 완전한 정보 유지에 필요한 모든 작업
		- 누군가 정보를 고의로 훼손하거나, 중간에 특정 이유로 변경이 가해졌을 때, 그것을 팡가해 잘못된 정보가 전달되거나 유지되지 못하도록 함.
		- MD5, SHA같은 해시 함수를 이용해 변경 여부 파악
	3. 가용성(Availabliity)
		- 정보가 필요할 때, 접근을 허락하는 일련의 작업
		- 보안을 막거나 통제하는것 이라고만 생각하다보니 가용성 유지의 우선순위가 떨어지는 경향이 있다. -> 어떤 이유에서라도 그 정보를 사용할 수 없는 상황이라면 정보보안에 실패한것
	- 이외에도 진정성, 책임성, 부인방지, 신뢰성 유지를 정보 보안 활동 중 하나로 정의하기도 함

- 네트워크의 정보 보안
	- 정보를 수집, 가공, 저장, 검색, 송수신 하는 도중의 정보의 훼손, 변조, 유출을 막기위한 관리적, 기술적 방법을 의미
	- 외부 공격에 맞서는 중요한 1차 방어선으로, 대부분 데이터와 애플리케이션 서비스들이 네트워크에 연결된 상황에서 네트워크 보안을 적절히 제공할 수 있다면 1차 저지선을 확보한 것과 같음

## 네트워크 보안의 주요 개념
- 트러스트(Trust)네트워크: 외부로 부터 보호받아야 할 네트워크
- 언트러스트(Untrust)네트워크: 신뢰할 수 없는 외부 네트워크
- DMZ(DeMilitarized Zone)네트워크: 운영하는 내부 네트워크 이지만 신뢰할 수 없는 외부 사용자에게 개방해야 하는 네트워크. 일반적으로 인터넷에 공개되는 서비스를 이 네트워크에 배치

트래픽의 방향과 용도에 따라서 두 가지로 나눈 네트워크 보안 분야
- 인터넷 시큐어 게이트웨이(Internet Secure Gateway)
	- 트러스트(또는 DMZ)네트워크에서 언트러스트 네트워크로의 통신을 통제
	- 정보와 요청 패킷을 적절히 인식하고 필터링 하는 기능 필요
	- 방화벽, SWG(Secure Web Gateway), 웹 필터(Web Filter), 애플리케이션 컨트롤(Apllication Control), 샌드박스
- 데이터 센터 시큐어 게이트 웨이(Data Center Secure Gateway)
	- 언트러스트 네트워크에서 트러스트 (또는DMZ)로의 통신을 통제
	- 상대적으로 고성능이 필요. 외부의 직접적인 공격을 막아야함.
	- 인터넷 관련 정보보다 공격 관련 정보가 더 중요
	- 방화벽, IPS, DCSG(DataCenter Secure Gateway), WAF(Web Application FireWall), Anti-DDos(Distribute Denial of Servife)

#### 9.1.3.1 네트워크 보안 정책 수립에 따른 분류
**화이트리스트(White List)/ 블랙 리스트(Black List)**
- 화이트 리스트
	- 방어에 문제가 없다고 명확히 판단되는 통신만 허용하는 방식
	- 인터넷 전체에 대한 화이트리스트를 만들기 어려우므로, 일반적인 IP와 통신 정보에 대해 명확히 아는 경우에 많이 사용(회사내부)
- 블랙리스트
	- 공격이라고 명확히 판단되거나, 문제가 있었던 IP리스트나 패킷 리스트를 기반으로 데이터 베이스를 만들고 그 정보를 이용해 방어하는 형태.
	- 각종 패턴으로 공격을 방어하는 네트워크 장비들은 일반적으로 블랙리스트 기반의 방어 기법을 제공
보안 관리 인력이 부족한 경우, 블랙리스트 기반 방어 정책을 수립하고 공격 데이터베이스를 최신으로 유지하는 것이 안정적인 보안 운영을 위해 바람직하다.
 
-> 정탐, 오탐, 미탐 유형이 존재함

### 9.1.4 네트워크 정보 보안의 발전 추세와 고려사항
네트워크 보안 장비는 외부와 내부의 변화로 발전합니다.
- 외부: 인프라 스트럭처나 서비스의 대변화로 인해 보안이 다라서 발전애햐 하는 경우
- 내부: 해킹 기술의 발전에 대응하다 보니 새로운 보안 장비와 서비스가 개발되어 발전하는 경우

## 9.2 보안 솔루션의 종류
데이터 센터에서 보안 장비를 디자인 할 때 DDos-방화벽-IPS-WAF형태와 같이 여러 단계로 공격을 막도록 인라인 상에서 여러 장배를 배치합니다.

- **DDoS방어 장비**
	Dos공격 => **Denial of Service** ;다양한 방법으로 공격 목표에 서비스 부하를 가해 정상적인 서비스를 방해하는 공격 기법. 
	- 적이 공격지에서 공격하는것이 일반적이었고, IP주소 기반으로 충분히 방어할 수 있었다.
		- **DDoS**; 탐지를 회피하고 짧은 시간에 공격 성과를 내기위해 봇을 이용해 분산 공격을 수행하는 기법 
		![[Screenshot_20220806-142433_Flexcil.jpg]]
	- DDos장비: DDos공격을 방어하는 보안 장비
		데이터 센터 내트워크 내부와 외부의 경계에서 공격 방어 -> *볼류메트릭 공격*을 우선 막기 위해
		- 볼류메트릭 공격: 트래픽 과도하게 발생시켜서 회선 사용을 방해하는 공격.
		- ISP나 네트워크 ISP와 연결되는 데이트 센터 네트워크의 가장 바깥쪽에 위치시켜 이 공격을 완화
- **방화벽**
	- 4계층에서 동작하는 패킷 필터링 장비. 3, 4 계층 정보를 기반으로 정책을 세울 수 있고 해당 정책과 매치되는 패킷이 방화벽을 통과하면 그 패킷을 허용하거나 거부 할 수 있다.
- **IDS, IPS**
	IDS와 IPS는 방화벽에서 방어할 수 없는 다양한 애플리케이션 공격을 방어하는 장비.
	- IDS(Intrusion Detection System; 침입 탐지 시스템)
	- IPS(Intrusion Prevention System; 침입 방지 시스템)
	기존에는 공격적인 것만 골라 방어하는 블랙기스트 기반의 방어 방식만 제공했지만, 프로파일링 기반의 방어 기법이 IPS 장비에 적용되고 애플리케이션을 골라 방어할 수 있는 애플리케이션 컨트롤 기능이 추가되면서 화이트리스트 기반의 방어 기법도 IPS장비에 적용할 수 있게 되었다.
- **WAF(Web Application Firewall)**
	웹 서버를 보호하는 전용 보안 장비. HTTP, HTTPS처럼 웹서버에서 동작하는 웹 프로토콜의 공격을 방어함.
	IDS/IPS장비보다 범용성이 떨어지지만 웹 프로토콜에 대해서더 세밀히 방어 할 수 있다.
	다양한 형태의 장비, 소프트웨어로 제공됨
	- 전용 네트워크 장비 / 웹서버 플러그인/ ADC플러그인 / 프록시 장비 클러그인
	IPS회피 공격 방어 가능.
	- WAF는 프록시 서버와 같이 패킷을 데이터 형태로 조합해 처리. 따라서 회피 공격을 쉽게 만들기 어렵고, 데이터의 일부를 수정, 추가하는 기능을 추가 할 수 있음
- **샌드박스**
	직접적인 공격 기법중 근본적인 공격 방법이 변함;
	직접적인 공격을 원하는 서버에 접근하지 않고 악성 코드를 관리자 PC에 우회적으로 심고, 이 악성 코드를 관리자 PC를 컨트롤 하는 방식으로 공격 목표 변경
	- 이때 기존 방화벽에서는 내부 사용자가 외부 서버로 통신을 시도한 것으로 보이므로 기존 방화벽에서는 이 공격을 검출하거나 방어 할 수 없음.
	- 이 공격들이 발전해 현재 APT(Advanced Persistent Treat; 지능형 지속 공격)과 ATA(Advanced Target Attact;지능형 표적 공격)이 되어있음.
	샌드박스는 *APT 공격을 방어하는 대표적인 장비*. 악성 코드를 샌드박스 시스템 안에서 직접 실행시키고, 그 행동들을 모니터링해 그 파일들의 악성 코드 여부를 판별하는 방법 이용.
- **NAC(Network AccessControl)**
	네트워크에 접속하는 장치들을 제어하기 위해 개발되어있음.
	네트워크에 접속할 때 인가된 사용자만 내부망에 접속할 수있고, 인가받기 전이나 승인에 실패한 사용자는 접속할 수 없도록 제어하는 기술.
- **IP제어**
	겉으로 보면 NAC솔루션과 공통적인 기술을 이용하거나, 기능이 비슷한 경우도 많으나, NAC와 목적이 다름 (고정 IP사용 권고 지침)
- **접근 통제**
	대부분 배스천 호스트(Bastion Host)기반으로 구현됨
	- 서버 접근을 위한 모든 통신은 배스천 호스트를 통해서만 가능.
		서버 호스트의 방화벽에 배스쳔 호스트에서 출발한 통신만 허용하고, 다른 통신은 모두 방어하도록 설정. 배스천 호스트의 보안, 감사를 높이면 보안을 강화할 수 있음.
	- 최근의 솔루션들은 접근 제어 뿐만아니라 화면 레코딩, 키보드 타이핑 저장, 등 사용자의 작업 모든 이력을 저장 
- **VPN**
	사용자 기반의 VPN 서비스를 제공해 주는 장비.
	가장 많이 사용하는 VPN은 IPSEC와 SSL.
	- IPSEC: 주로 네트워크 연결용.
	- SSLVPN: 사용자가 내부 네트워크에 연결할 때 주로 쓰임

## 9.3 방화벽
>**방화벽**
네트워크 중간에 위치해 해당 장비를 통과하는 **트래픽을 사전에 주어진 정책 조건에 맞추어 허용하거나 차단**하는 장비
일반적으로 네트워크 3, 4계층에서 동작, *세션을 인지하는 상태 기반 엔진(Stateful Packet Inspection, **SPI**)* 으로 동작

- 초기 방화벽
	초기에는 SPI 엔진이 없었음. 패킷의 인과관계(세션 정보, 방향성)를 확인하지 못하고, 정책만으로 패킷을 필터링 => *스테이트 리스, 패킷 필터(Stateless, Packet Filter) 방화벽 이라고 함*
	- 패킷이 방화벽에 설정도니 정책에 일치되는게 있는지 확인한다.
		이때 확인하는 조건 => 5-튜플(5-Tuple); 3,4 계층의 헤더 중 5가지 주요 필드를 뜻함
		- Source IP, Detination Ip, Protocaol No, Source Port, Destination Port
			- 프로토콜 번호(3계층 프로토콜 지시자로 TCP, UDP를 지정할때 사용. TCP는 6, UDP는 17)
	- 지정된 구간에서 간단한 정책을 정의할때는 큰 문제가 없지만, 인터넷 통신과 같이 불특정 다수 기반의 정책을 정의할때는 룰셋(Ruleset)이 복잡해지고 보안이 약화되는 문제가 있음
		- 또한, 3,4 계층 헤더를 변조해 공격하면 적절한 방어가 불가능
	패킷 필터링은 다른 세대 방화벽 엔진보다 **부하가 적고 간단**하므로 네트워크 장비나 현대 일부 방화벽에서도 특수 기능을 위해 남겨 놓음.
- 현대적 방화벽 등장(SPI엔진)
	상태 기반 방화벽(Stateful Inspction Firewall). 우리가 '방화벽' 이라 부르는 모든 장비는 세션 기반으로 동작하는 상태기반 엔진을 탑재하고 있음
	SPI 엔진은 패킷의 인과 관계와 방향성을 인지해 정책을 적용할 수 있어 ==내부에서 외부 인터넷으로 통신을 시도해 받은 응답과 외부에서 내부로 직접 들어오려는 패킷을 구분할 수 있다.==
- ALG(Application Layer Gateway)
		방화벽은 패킷 필터 엔진보다 헤더 정보를 상세히 확인하고 세션을 인지할 수 있지만, 애플리케이션 헤더 정보를 인지할 수 없다.
		(FTP프로토콜을 이해해 동작 ==생략==)

### 9.3.6 방화벽의 한계
SPI엔진을 사용하는 방화벽은 적은 리소스로도 다양한 공격을 쉽게 방어할 수 있었기 때문에 네트워크 보안에서 필수 요소가 되었지만, OSI 3,4 계층에서만 동작하므로 많은 한계가 있다.
- 근본적으로 바이러스를 감지하거나, 백도어, 웜, 알려진 취약점을 악용한 다양한 공격도 방어할 수 없음.
- ==애플리케이션 프로토콜에서 보유하고 있는 취약점을 검사하지 못하기때문에 대응이 불가능==
> 이러한 웜 공격을 막기위해 등장한 보안장비기 **IPS**

## 9.4 IPS, IDS
애플리케이션 계층에서 이루어지는 다양한 공격 탐지 방어를 위해 IDS와 IPS가 개발되었다.
- **IDS(Intrusion Detection System)**; 침입 탐지 시스템
	공격자가 시스템을 해킹할 때 탐지를 목적으로 개발된 시스템.
	방어보다는 *탐지*에 초점을 맞추어 개발됨.
- **IPS(Intrusion Prevention System)**; 침입 방지 시스템
	공격이 발견되면 *직접 차단* 하는 장비.
	트레픽을 복제해 검토만 하는 것이 아니라, 트래픽이 자나가는 인라인 상에 장비를 배치

IPS는 호스트 기반 IPS / 네트워크 기반 IPS가 있음.
일반적으로 IPS라고 부르는 시스템은 네트워크 기반 NIPS(Network based IPS)이다. 클라우드 네트워크의 여러 가지 제약사항 때문에 클라우드 내부 네트워크에서 NIPS배포가 어려워 HIPS 사용 빈도가 늘었지만 여러가지 불편한 점(서비스와 리소스 공유, 장애 발생 시 장애 주체 파악의어려움) 때문에 클라우드 내부에서도 네트워크 기반 NIPS로 바뀌는 추세

### 9.4.2 IPS, IDS 동작 방식(377p)

