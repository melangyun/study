|                                                               SNS<br/>(Simple Notification Service)                                                                |                                                   SQS<br/>(Simple Queue Service)                                                    |
|:------------------------------------------------------------------------------------------------------------------------------------------------------------------:|:-----------------------------------------------------------------------------------------------------------------------------------:|
|                                             Publisher(게시자)가 Subscriber(구독자)에게 메시지를 전송하는 관리형 서비스                                             |   마이크로 서비스, 분산시스템 및 서버리스 애플리케이션을 쉽게 분리하고 확장할 수 있도록 지원하는 완전관리형 메시지 대기열 서비스    |
| Publisher는 Topic(주제)에 메세지를 발행한다. Topic은 수많은 Subscribers(구독자들)에게 전달될 수 있다.(fan out) 이때 전달 방식은 다양하다.(Lambda, SQS, Email, ...) | 시스템은 Queue로부터 새로운 이벤트를 실시할 수 있다. Queue에 있는 메세지들은 한명이 consumer(고객) 또는 하나의 서비스에서 실행된다. |
|                       **다른 시스템들이 신경 쓰는가?**<br/> - Topic에 메시지를 publish(발행)하고 싶어하고, 사람들에게 발행되었다고 알리고 싶을 때                       |                                  **이 시스템이 이벤트에 신경쓰는가?** <br/>- 내가 이벤트의 수신자일 때                                  |


![SNS와 SQS흐름](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FbEtXfI%2FbtqUczWQt4W%2FjB4TFo8EnNKA2rcN6t8i20%2Fimg.png)

1. 사용자의 결제
2. 결제 서버에서 결제정보 publish (SNS Topic에 발행)

SNS의 수신자는 
- Lambda
	사용자에게 결제정보를 이메일로 보내주는 역할
- SQS Queue
	하루 동안 웹사이트에서 일어난 거래를 분석하는 서비스
	하루에 총 몇 건의 결제가 이루어졌는지, 총 금액은 얼마인지 등등 분석
	결제가 이루어질 때마다, 결제 정보를 SNS Queue에 저장한 후, Ec2를 사용하여 Queue에 있는 메시지를 꺼내(poll)와 분석을 진행한다.
- SQS Queue
	거래 정보가 사기인지 탐색하는 서비스
	결제 건에 대하여 정상적인 결제인지, 사기인지를 판단하는 서비스
	결제 정보를 SQS에 저장 후, ec2를 사용하여 Queue에 있는 메시지를 꺼내와서 poll 분석을 진행한다.

세 서비스는 각자 다른 일을 하지만, 결제 정보라는 동일한 이벤트를 기반으로 운영된다. 서로 다른 사용자들이 동일한 하나의 이벤트에 관해 각각의 동작을 진행하는 방식이다. 이때 우리는 SNS가 필요하다.

| SNS                                                                            | SQS                                                 |
| ------------------------------------------------------------------------------ | --------------------------------------------------- |
| Topic(Pub/Sub)                                                                 | Queue                                               |
| Push: 사용자에게 메시지 전송                                                   | Pull: 사용자가 메세지를 가져온다                    |
| Fanout: 같은 메세지를 여러 방향으로 발행                                       | Decouple: 여러 서비스로 분리하여 병렬식 비동기 처리 |
| 메시지를 받는 사용자가 없으면, 몇 번 시도하다가 삭제된다. (혹은 DLQ 사용 가능) | 메시지는 일정 기간동안 유지된다.                    |
| 하나의 메시지를 사용자들이 각각 다른 방식으로 활용                             | 하나의 메시지를 사용자들이 동일한 방식으로 사용     |





---
[\[AWS\] SNS vs SQS 차이점](https://seohyun0120.tistory.com/entry/AWS-SNS-vs-SQS-%EC%B0%A8%EC%9D%B4%EC%A0%90)