<iframe width="560" height="315" src="https://www.youtube.com/embed/6w7SQ_1aJ0A?si=o45NCpCrdovC9pJ8" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>

**목차**
1. DDD에 대한 오해
2. 전략적 설계
3. Bounded-Context
4. 진화하는 설계
5. 정리
---

DDD는 전술적 설계보다 `전략적 설계`가 중요하다
전술적 설계에 너무 함몰되지 않도록 주의해야 한다. 모든 문제 영역에 전술적 패턴을 적용할 필요도 없고 적용할 수도 없다.
진짜 중요하고 핵심적인 곳만 추출해서 그 영역에 많은 비용이 들어가는 전술적 패턴이 들어가는것이 시작이다.

---

DDD는 만병통치약이 아니다.
- 상대적으로 단순한 소프트웨어에는 적용하면 안된다!
비즈니스 도메인 요소가 약한 서비스에도 어울리지 않는다.
DDD와 MSA는 시너지가 날 수는 있지만 무조건 적인 관계가 아니다.
DDD는 기술이나 구현 영역이 아니다.

---

DDD 는 `설계`이다.
본질은  `전략적 설계`에 근간을 두고 있다.

- 비즈니스 도메인: 현실세계의 기업의 주요 활동 영역
- 비즈니스 도메인중 문제 도메인을 소프트웨어 세계에서 해결하고자 할 때  -> `문제 도메인` 이라고 부른다.
소프트웨어로 어떤 문제를 해결해서 가치를 창출할 것인가.

-> 문제도메인과 비즈니스 도메인이 같을수도 있다.
```
비즈니스 영역에서 소프트웨어는 문제를 해결해서 새로운 가치를 해결하는것
```

문제공간을 작은 하위 도메인으로 나누는것이 필요하다. DDD 전략적 설계에서 문제 공간을 식별하는 일반적인 패턴

문제 공간을 인식하는 것에서 끝나는 것이 아니라, 문제 도메인을 작은 서브도메인으로 나누는 작업까지 가야한다. 비즈니스적 도메인은 대부분 방대한 복잡성을 갖고 있기 때문에 나누고 정복하는것이 편하다 (분할정복)

`유비쿼터스 언어`를 통해서 지식 탐구가 계속해서 진행이 되어야 한다.

- 중요한것과 중요하지 않은것은 무엇인가?
- 핵심공간을 판별하는것이 문제공간을 판별하는 목적이다.
	- 당연히 핵심은 경쟁사에 비해 우위를 가지는 것
	- 핵심은 내부 개발사에서 개발하고, 핵심이 아닌것은 외부에서 개발하는것도 방법

문제공간에서 지식 탐구는 도메인 전문가가 주가되는 반면, 해결 공간에서 지식 탐구는 개발자가 주가 된다.
- 해결 공간에서 개발 영역의 설계가 시작되기 때문

하위도메인에서 BoundedContext 식별이 시작되고 BoundedContext간 관계와 전술까지 선택하게 된다.
그럼 해결 공간이 표현되게 된다

여기까지가 교과서적인 DDD의 설계

---
소프트웨어가 얼만큼 복잡해질지 모르는 상황에서 처음부터 DDD를 적용하는것은 도움이 되지 않는다. 미래는 예측 불가능한 영역이기 때문에.
- 도메인의 요구사항도 계속해서 바뀌고 분명 생명 주기가 있기 때문에 섯불리 먼저 적용하면 망해버리는 이유가 되기도 할듯

> 모든 것은 변하며 변하지 않는것은 '모든 것은 변한다'는 사실 뿐이다


![Big ball of Mud](https://miro.medium.com/v2/resize:fit:1200/0*EWjybLwJbxllHPFo)

대부분 DDD를 적용하는 시점은 SW가 Bigball of mud 스타일에서 방대한 복잡성을 감당할 수 없지만, 개선의지가 있을때 적용하면 좋다.
(Bigball of mud는 특별한 구조가 없는 아키텍처 스타일 - 안티패턴도 아니고.. 단순하면 이것도 충분히 가능, 선택할 수 있는 전략중 하나이다.)

전략적 설계시 유용한 도구
- 사용 사례 (use-case)분석
- 이벤트 스토밍
- Business Model 분석

> 유비쿼터스 언어를 정제한 
> 지식 탐구와 `커뮤니케이션` 이 가장 중요하다.


- [*] 유비쿼터스 언어를 기반으로 사용해서 상호간 의사소통을 하여 모델 정제를 하는것이 매우 중요하다.

| 설계    | 전략적 설계                               | 전술적 설계                  |
| ----- | ------------------------------------ | ----------------------- |
| 범위    | 전반적                                  | 특정 Bounded-Context      |
| 목적    | 문제 도메인을 해결 영역으로                      | 풍부한 도메인 모델 적용           |
| 메타포   | 전쟁에서 전략                              | 전투에서 전술                 |
| 주요 패턴 | Bounded-Context, Ubiquitous-Language | Aggregate, Domain-Event |
| 수행 방식 | 접근법                                  | 상대적으로 방법론에 가까움          |

---
전략적 설계 과정

1. 비즈니스 도메인에서 문제 도메인 추출
2. 문제 도메인을 서브 도메인으로 나누기
3. 문제 공간 식별
4. 문제 공간을 해결 공간으로

> Bounded-Context 간 경계를 설정하고 관계 설정


BoundedContext 가 다르면 유비쿼터스 언어도 달라진다.
즉, BoundedContext는 Unbiquitous와 함께 모델의 무결성을 위한 경계라고 보면된다.

> 어떤 모델이 어떤 경계에 들어갈 것인가는 유비쿼터스 언어가 매우 중요하다.
> 어디에 배치되고 어떻게 설계해야 할것인지 매우 모호한 부분이 있기 때문

---
모델 무결성1
- 회원 Bounded Context: Account -> 계정
- 은행 Bounded Context: Account -> 계좌

모델 무결성 2
동일 이름이지만 여러모델에 걸쳐 있음
- Product
	- 상품
	- 스케줄
	- 정산
	- 예매
모든 context의 요구사항을 만족하려면 Product model은 매우 복잡하고 거대해진다.

---
Bounded Context에 한개 이상의 하위 도메인이 존재하게 된다.

해결 공간에서 각 Bounded Context별로 전술을 선택하는 것도 중요하다.

- 콘웨이 전략
	- 소프트웨어의 구조는 해당 소프트웨어를 개발하는 조직의 구조를 따라간다.
- 역 콘웨이 전략
	- 개발하는 조직의 구조를 소프트웨어의 구조에 맞춘다.